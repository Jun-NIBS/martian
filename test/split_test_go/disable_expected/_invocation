# A super-simple test pipeline with splits.
@include "pipeline_stages.mro"

# Runs the stage.
pipeline SUM_SQUARE_PIPELINE(
    in  float[] values,
    in  bool    disable_sq,
    out float   sum,
)
{
    call SUM_SQUARES(
        values = self.values,
    ) using (
        disabled = self.disable_sq,
    )

    call REPORT(
        values = self.values,
        sum    = SUM_SQUARES.sum,
    )

    return (
        sum = SUM_SQUARES.sum,
    )
}

# Calls the pipelines, sweeping over two forks.
call SUM_SQUARE_PIPELINE(
    values     = [
        1,
        2,
        3
    ],
    disable_sq = sweep(
        true,
        false
    ),
)
