# A super-simple test pipeline with splits.

# Computes the sum of each value in a separate chunk, and
# sums the squares in the join phase.
stage SUM_SQUARES(
    in  float[] values,
    out float   sum,
    src comp    "sum_squares",
) split (
    in  float   value,
) using (
    mem_gb = 1,
)

# Prints the output to the user, but only if the pipestance doesn't finish.
stage REPORT(
    in  float[] values,
    in  float   sum,
    src py      "stages/report",
) using (
    mem_gb = 1,
)
